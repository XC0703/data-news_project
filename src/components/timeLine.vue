<template>
    <!-- 最外层的盒子 -->
    <div id="outerBox">
        <div class="box activeBox" id="box1">
            <div class="summarize">1987-1994: 起步及探索阶段</div>
            <div class="content">
                <!-- 第一大块 -->
                <!-- 左边整体的内容 -->
                <div class="rightBox eventBox">
                    <h2>1987年</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>北京松堂关怀医院 中国第一所民办临终关怀医院</ul>
                    </div>
                    <span></span>
                </div>
                <!-- 右边整体的内容 -->
                <div class="leftBox eventBox" style="top: 1.2rem;">
                    <h2>1988年</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>天津医学院临终关怀研究中心成立（我国第一家临终关怀专门研究机构）</ul>
                    </div>
                    <span></span>
                </div>

                <!-- 第二大块 -->
                <!-- 左边整体的内容 -->
                <div class="rightBox eventBox" style="top: 2.4rem;">
                    <h2>1990年</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>上海总工会退休职工管理委员会下属退休职工护理院，开创在护理院中开展临终关怀的先例</ul>
                    </div>
                    <span></span>
                </div>
                <!-- 右边整体的内容 -->
                <div class="leftBox eventBox" style="top: 3.6rem;">
                    <h2>1992年</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>天津医科大学第二附属医院设立中国首家临终关怀病房</ul>
                    </div>
                    <span></span>
                </div>
            </div>
            <div class="boxAfter">未完待续...</div>
        </div>
        <div class="box" id="box2">
            <div class="summarize">1994-2016: 进入政策视野的发展阶段</div>
            <div class="content">
                <!-- 第一大块 -->
                <!-- 左边整体的内容 -->
                <div class="rightBox eventBox">
                    <h2>1994年</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>卫生部第35号令《医疗机构管理条例》和《医疗机构诊疗科目》首次明确临终关怀科为卫生行政部门核定医疗诊疗科目登记注册。</ul>
                    </div>
                    <span></span>
                </div>
                <!-- 右边整体的内容 -->
                <div class="leftBox eventBox" style="top: 1.2rem;">
                    <h2>1996年</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>《中华人民共和国老年人权益保障法》首次规定保障老年人临终关怀服务需求。</ul>
                    </div>
                    <span></span>
                </div>

                <!-- 第二大块 -->
                <!-- 左边整体的内容 -->
                <div class="rightBox eventBox" style="top: 2.4rem;">
                    <h2>2006年</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>原卫生部中医药管理局《城市社区卫生服务机构管理办法（试行）》明确：临终关怀科作为可登记的诊疗科目。</ul>
                    </div>
                    <span></span>
                </div>
                <!-- 右边整体的内容 -->
                <div class="leftBox eventBox" style="top: 3.6rem;">
                    <h2>2011年</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>原国家卫生部颁布《护理院基本标准（2011版）》（卫医政发〔2011〕21号）将临终关怀科作为必设科室，并在现科室增加家属专门陪伴室。
《中国护理事业发展纲要（2011-2015）》首次将临终关怀纳入护理规划和长期医疗护理服务。</ul>
                    </div>
                    <span></span>
                </div>

                <!-- 第三大块 -->
                <!-- 左边整体的内容 -->
                <div class="rightBox eventBox" style="top: 4.8rem;">
                    <h2>2012年</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>《中华人民共和国老年人权益保障法》要求：为老年患者开展临终关怀服务。</ul>
                    </div>
                    <span></span>
                </div>
                <!-- 右边整体的内容 -->
                <div class="leftBox eventBox" style="top: 6rem;">
                    <h2>2013年</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>国务院《关于促进健康服务产业发展的若干意见》首次提到临终关怀医院为覆盖全生命周期、内涵丰富、结构合理的健康服务体系的组成部分。</ul>
                    </div>
                    <span></span>
                </div>

                <!-- 第四大块 -->
                <!-- 左边整体的内容 -->
                <div class="rightBox eventBox" style="top: 7.2rem;">
                    <h2>2014年</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>我国政府和全球194个成员国向联合国承诺将临终关怀工作作为各自国家卫生体系的重点工作。</ul>
                    </div>
                    <span></span>
                </div>
                <!-- 右边整体的内容 -->
                <div class="leftBox eventBox" style="top: 8.4rem;">
                    <h2>2015年</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>《国务院关于推进医疗卫生与养老服务相结合的指导意见》对临终关怀工作进行了部署与要求，“要为老年人提供治疗期住院、康复期护理、稳定期生活照料以及临终关怀一体化的健康和养老服务”。</ul>
                    </div>
                    <span></span>
                </div>

                <!-- 第五大块 -->
                <!-- 左边整体的内容 -->
                <div class="rightBox eventBox" style="top: 9.6rem;">
                    <h2>2016年4月</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>4月21日，全国政协49次双周协商会实现了在国家层面首次推进全国安宁疗护，依据会议统一大陆地区临终关怀相关术语为“安宁疗护”，明确了安宁疗护的功能定位与内涵。</ul>
                    </div>
                    <span></span>
                </div>
                <!-- 右边整体的内容 -->
                <div class="leftBox eventBox" style="top: 10.8rem;">
                    <h2>2016年10月</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>10月25日，中共中央、国务院印发并实施《健康中国2030规划纲要》，首次将安宁疗护名词写入纲要，确保安宁疗护作为持续性医疗卫生服务。</ul>
                    </div>
                    <span></span>
                </div>
            </div>
            <div class="boxAfter">未完待续...</div>
        </div>
        <div class="box" id="box3">
            <div class="summarize">2017-今：全国安宁疗护试点的持续发展阶段</div>
            <div class="content">
                <!-- 第一大块 -->
                <!-- 左边整体的内容 -->
                <div class="rightBox eventBox">
                    <h2>2017年1月</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>1月，国家卫生和计划生育委员会印发《安宁疗护实践指南（试行）》《安宁疗护中心基本标准（试行）》和《安宁疗护中心管理规范（试行）》。</ul>
                    </div>
                    <span></span>
                </div>
                <!-- 右边整体的内容 -->
                <div class="leftBox eventBox" style="top: 1.2rem;">
                    <h2>2017年4月</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>4月，国家卫计委第12条文《医疗机构管理条例实施细则》在医疗机构类别中新增安宁疗护中心。</ul>
                    </div>
                    <span></span>
                </div>

                <!-- 第二大块 -->
                <!-- 左边整体的内容 -->
                <div class="rightBox eventBox" style="top: 2.4rem;">
                    <h2>2017年10月</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>10月，国家卫计委选定北京市海淀区、吉林省长春市、上海市普陀区、河南省洛阳市和四川省德阳市作为全国第一批安宁疗护工作试点市（区）；并明确了试点工作的八项任务。</ul>
                    </div>
                    <span></span>
                </div>
                <!-- 右边整体的内容 -->
                <div class="leftBox eventBox" style="top: 3.6rem;">
                    <h2>2018年8月</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>8月29日国务院办公厅在《关于印发深化医药卫生体制改革下半年重点工作任务的通知》指出，在建立优质高效的医疗服务体系中将开展安宁疗护试点作为重点工作任务进行部署。</ul>
                    </div>
                    <span></span>
                </div>

                <!-- 第三大块 -->
                <!-- 左边整体的内容 -->
                <div class="rightBox eventBox" style="top: 4.8rem;">
                    <h2>2019年5月</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>5月，国家卫生健康委发布了《关于开展第二批安宁疗护试点工作的重要通知》，明确了在第一批安宁疗护试点工作的基础上，扩大试点范围，确定了上海市为第二批全国安宁疗护试点省（市），北京西城区等71个市（区）为安宁疗护试点市（区）。</ul>
                    </div>
                    <span></span>
                </div>
                <!-- 右边整体的内容 -->
                <div class="leftBox eventBox" style="top: 6rem;">
                    <h2>2019年7月</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>7月，健康中国行动推进委员会印发《健康中国行动(2019—2030年)》，强调要
推进安宁疗护试点工作。</ul>
                    </div>
                    <span></span>
                </div>

                <!-- 第四大块 -->
                <!-- 左边整体的内容 -->
                <div class="rightBox eventBox" style="top: 7.2rem;">
                    <h2>2019年10月</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>10月，经国务院同意，国家卫健委等8部委联合印发了《关于建立完善老年健康服务体系的指导意见》，对安宁疗护出台了三条新政策。</ul>
                    </div>
                    <span></span>
                </div>
                <!-- 右边整体的内容 -->
                <div class="leftBox eventBox" style="top: 8.4rem;">
                    <h2>2019年12月</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>12月，《基本医疗与健康促进法》规定：各级各类医疗卫生机构应当分工合作，为公民提供预防、保健、治疗、护理、康复、安宁疗护等全方位和全周期的医疗卫生服务。标志着国家已将安宁疗护上升到法律层面推动。
                            12月23日，国家卫健委、民政部、国家医药管理局《关于印发医养结合机构服务指南（试行）》对医养结合机构安宁疗护工作进行规范。
                        </ul>
                    </div>
                    <span></span>
                </div>

                <!-- 第五大块 -->
                <!-- 左边整体的内容 -->
                <div class="rightBox eventBox" style="top: 9.6rem;">
                    <h2>2020年12月</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>12月 北京市卫生健康委员会确定北京协和医院与北京医院2家医院为“北京市安宁疗护指导中心”，北京清华长庚医院、北京大学首钢医院、北京市海淀医院等9家医院为“北京市首批安宁疗护示范基地”。</ul>
                    </div>
                    <span></span>
                </div>
                <!-- 右边整体的内容 -->
                <div class="leftBox eventBox" style="top: 10.8rem;">
                    <h2>2021年3月</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>3月，两会代表提出将安宁疗护纳入医保体系，完善安宁疗护病房建立，加大专业人才培训，推动服务标准建立等重要提案。</ul>
                    </div>
                    <span></span>
                </div>

                <!-- 第六大块 -->
                <!-- 左边整体的内容 -->
                <div class="rightBox eventBox" style="top: 12rem;">
                    <h2>2022年5月</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>5月，《全国护理事业发展规划（2021-2025年）》指出，加快发展安宁疗护。推动各地按照《安宁疗护中心基本标准和管理规范（试行）》，结合分级诊疗要求和辖区内群众迫切需求，着力增加安宁疗护中心和提供安宁疗护服务的床位数量。制修订《安宁疗护实践指南（试行）》及相关技术标准，不断规范从业人员实践行为。加快培养培训从事安宁疗护服务的专业人员，切实提高生命终末期患者的安宁疗护质量。
5月，《“十四五”国民健康规划》指出，我国将稳步扩大全国安宁疗护试点，支持有条件的省市全面开展安宁疗护工作，完善安宁疗护服务模式，建立安宁疗护服务制度体系，提高老年人和疾病终末期患者生命质量。</ul>
                    </div>
                    <span></span>
                </div>
                <!-- 右边整体的内容 -->
                <div class="leftBox eventBox" style="top: 13.2rem;">
                    <h2>2022年7月</h2>
                    <div>
                        <p>发生的事件</p>
                        <ul>7月，《关于进一步推进医养结合发展的指导意见》指出，各地要优化医疗资源布局，通过新建、改扩建、转型发展等方式，加强康复医院、护理院（中心、站）和安宁疗护机构建设，支持老年医学科和安宁疗护科发展。</ul>
                    </div>
                    <span></span>
                </div>
            </div>
            <div class="boxAfter">未完待续...</div>
        </div>
    </div>
</template>

<script>

export default {
  name: "timeLine",
  mounted(){
    this.slideshow();
  },
  methods:{
    //---------主角：轮播图函数-------------
    slideshow () {
        var slideshow=document.getElementById("outerBox");
        var boxs=slideshow.getElementsByClassName("box"); //获得三个盒子
        var current=0; //current为当前活跃的盒子编号
        function slideOff() {
            boxs[current].className="box"; //盒子淡出
        }
        function slideOn() {
            boxs[current].className="box activeBox"; //盒子淡入
            var boxAfter = document.querySelectorAll("#outerBox .activeBox .content .boxAfter");
            var eventBoxs = document.querySelectorAll("#outerBox .activeBox .content .eventBox");
            var delayTime = 0;
            for(let i = 0;i<eventBoxs.length;i++){
                delayTime+=0.5;
                eventBoxs[i].style.animationDuration=delayTime+'s';
            }
            for(let i = 0;i<boxAfter.length;i++){
                boxAfter[i].style.animationDuration=0.5*eventBoxs.length+'s';
            }  
        }
        function changeSlide() { //切换盒子的函数
            slideOff(); //盒子淡出
            current++; //自增1
            if(current>2) current=0;
            if(current==0){
                slideshow.style.height = '5rem'
            }else if(current==1){
                slideshow.style.height = '12rem'
            }else{
                slideshow.style.height = '15rem'
            }
            slideOn(); //盒子淡入
        }
        slideshow.onmouseover=function () {
            clearInterval(slideon); //当鼠标移入时清除轮播事件
        }
        slideshow.onmouseout=function () {
            slideon=setInterval(changeSlide,6000); //当鼠标移出时从新开始轮播事件
        }
        //调用changeSlide函数进行盒子轮播
        var slideon=setInterval(changeSlide,6000);
    }
  }
};
</script>

<style lang="scss" scoped>
#outerBox {
    /* 竖线样式 高度根据事件的多少调整*/
    width: .05rem;
    height: 5rem;
    background: rgb(221, 221, 221);
    margin: .4rem auto;
    position: relative;
    .box{
        transition: opacity 1s linear;
        opacity: 0;
        .summarize{
            position: absolute;
            left:-5.9rem;
            top:0.1rem;
            color:orange;
            font-size: .28rem;
        }
        .boxAfter{
            width: 100px;
            color: rgb(84, 84, 85);
            position: absolute;
            margin-left: -47px;
            text-align: center;
            bottom: -30px;
            animation: showIn ease;
        }
    }
    .activeBox{
        opacity: 1;
    }
}
// 装着事件的盒子样式
.eventBox {
    /* 球球的样式 */
    position: absolute;
    margin-left: -4px;
    margin-top: -10px;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    border: 4px solid rgb(221, 221, 221);
    background: rgb(31, 122, 252);
    transition: all 0.5s;
    animation: showIn ease;
    h2{
        /* 日期的样式 */
        position: absolute;
        margin-left: -120px;
        margin-top: 3px;
        color: rgb(84, 84, 85);
        font-size: 14px;
        cursor: pointer;
    }
    div{
        /* 左右事件的样式 */
        position: absolute;
        top: 50%;
        margin-top: -.15rem;
        left: .5rem;
        width: 3rem;
        display: inline-block;
        border: 2px solid rgb(84, 84, 85);
        border-radius: .06rem;
        z-index: 2;
        overflow: hidden;
        cursor: pointer;
        transition: all 0.5s;
        ul {
            /* 左右事件触摸展开后内容的样式 */
            list-style: none;
            width: 300px;
            padding: 4px;
            border-top: 2px solid rgb(84, 84, 85);
            color: rgb(84, 84, 85);
            font-size: 14px;
        }
        p{
            /* 左右事件的字体样式 */
            color: rgb(84, 84, 85);
            font-weight: bold;
            text-align: center;
        }
    }
    span{
        content: '';
        position: absolute;
        top: -3px;
        left: .34rem;
        width: 0px;
        height: 0px;
        border: 7px solid transparent;
        border-right: 7px solid rgb(84, 84, 85);
        z-index: -1;
        animation: showIn ease;
    }
}
@keyframes showIn {
    /* 球球、竖线、左右的模块的动画 */
    0%{
        opacity: 0;
    }
    70% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}
// 触摸事件后球球的样式 
.eventBox:hover {
    border: 4px solid rgb(195, 195, 195);
    background: rgb(143, 189, 253);
    box-shadow: 0 0 2px 2px rgba(255, 255, 255, 0.4);
}
/* 右边日期的样式 */
.leftBox h2 {
    margin-left: 60px;
    width: 100px;
}
/* 左边事件的样式 */
.leftBox div {
    left: -337px;
}
/* 左边事件的角标样式 */
.leftBox span {
    left: -34px;
    border: 7px solid transparent;
    border-left: 7px solid rgb(84, 84, 85);
}
</style>


